<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js" defer></script>
</head>
<body>
    <header>
        <h1>Hub</h1>
        <div class="account-container">
            <button id="account-btn">Compte</button>
            <!-- Menu retir√© d‚Äôici -->
        </div>
    </header>

    <main>
        <div id="projects-container">
            <p id="no-projects" class="hidden">R√©cup√©ration des projets...</p>
        </div>
    </main>

    <footer>
        <p>Fait avec ‚ô• par No√©. ¬© 2025</p>
        <a href="#" id="licence-link">Licence MIT</a>
        <div id="licence-popup" class="hidden">
            <h3>Licence MIT</h3>
            <p>License & Copyright ¬© 2025 No√© Besan√ßon</p>
            <p>¬© 2025 No√© Besan√ßon.  Le code source est accessible librement pour consultation uniquement.  Toute modification, redistribution ou r√©utilisation du code est interdite sans autorisation √©crite pr√©alable.</p>
            <button id="close-licence">√ó</button>
        </div>
    </footer>

    <!-- Menu compte d√©plac√© ici, tout √† la fin -->
    <div id="account-menu" class="hidden">
        <div id="account-info"></div>
        <div id="account-actions"></div>
    </div>

    <!-- Popup Auth (d√©j√† pr√©sent) -->
    <div id="auth-popup" class="hidden">
        <div class="auth-modal">
            <button id="close-auth" title="Fermer">√ó</button>
            <div id="auth-forms">
                <form id="login-form" class="active">
                    <h2>Connexion</h2>
                    <input type="email" id="login-email" placeholder="Email" required>
                    <input type="password" id="login-password" placeholder="Mot de passe" required>
                    <button type="submit">Se connecter</button>
                    <p>Pas de compte ? <span id="show-signup" class="link">Cr√©er un compte</span></p>
                </form>
                <form id="signup-form">
                    <h2>Inscription</h2>
                    <input type="email" id="signup-email" placeholder="Email" required>
                    <input type="password" id="signup-password" placeholder="Mot de passe" required>
                    <input type="password" id="signup-password-confirm" placeholder="Confirmer le mot de passe" required>
                    <button type="submit">S'inscrire</button>
                    <p>D√©j√† un compte ? <span id="show-login" class="link">Se connecter</span></p>
                </form>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(() => {
            const popup = document.createElement('div');
            popup.innerHTML = `
                <div class="donation-modal">
                <button id="close-donation-popup" title="Fermer">&times;</button>
                <div class="donation-content">
                  <h2>üíù Un petit don, m√™me 1‚Ç¨, c‚Äôest un √©norme soutien üíå</h2>
                  <p style="font-style: italic; font-size: 1.1rem;">
                    Chaque contribution m‚Äôaide concr√®tement √† consacrer du temps pour cr√©er et maintenir <b>des outils accessibles √† tous, toujours gratuits et sans pub</b>.
                  </p>
                  <p>
                    üôè Je d√©veloppe et partage ces projets avec <b>passion</b> et l‚Äôespoir de rendre le web plus ouvert et utile √† chacun.<br>
                    Votre g√©n√©rosit√© <b>change tout</b> : sans elle, cette aventure open source s‚Äôarr√™terait.
                  </p>
                  <p style="font-weight:600;">
                    <span style="color:#ff813f;">Vous √™tes la raison pour laquelle ces projets restent vivants et progressent. Merci d‚Äôy croire ‚Äì votre geste compte, vraiment.</span>
                  </p>
                  <a href="https://www.buymeacoffee.com/noebsc" target="_blank" rel="noopener noreferrer" class="donation-button">
                    ‚òï Faire un don sur BuyMeACoffee
                  </a>
                  <p class="donation-note">Merci du fond du c≈ìur pour votre soutien pr√©cieux ‚ù§Ô∏è<br>
                  M√™me 1‚Ç¨, c‚Äôest d√©j√† √©norme.</p>
                </div>
              </div>
            `;
            document.body.appendChild(popup);
            
            console.log('Pop-up de don forc√© ajout√© au DOM');
          }, 1000);
        });
        window.addEventListener('DOMContentLoaded', () => {
          setTimeout(() => {
            donationPopup.classList.remove('donation-popup-hidden');
            // Attache les √©couteurs APR√àS que le DOM du popup soit cr√©√© (donc croix pr√©sente !)
            const closeDonationBtn = document.querySelector('#close-donation-popup');
            if (closeDonationBtn) {
              closeDonationBtn.addEventListener('click', function(e) {
                e.stopPropagation(); // Emp√™che la propagation au parent
                donationPopup.remove(); // Supprime l'√©l√©ment du DOM, plus aucun affichage possible
                console.log('Pop-up don ferm√© via bouton X');
              });
            }
            // Clic sur l'arri√®re-plan (donationPopup lui-m√™me)
            donationPopup.addEventListener('click', function(e) {
              if (e.target === donationPopup) {
                donationPopup.remove();
                console.log('Pop-up don ferm√© via clic arri√®re-plan');
              }
            });
          }, 1000);
        });
    </script>
</body>
</html>
